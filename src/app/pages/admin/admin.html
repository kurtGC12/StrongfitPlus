<main class="container my-5">
  <h2>Gestión de Usuarios</h2>
  <div class="table-responsive">
    <table class="table table-striped">
      <thead class="table-dark">
        <tr>
          <th>Nombre</th>
          <th>Usuario</th>
          <th>Correo</th>
          <th>Fecha Nac.</th>
          <th>Rol</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of usuarios; let i = index">
          <td>{{ user.nombre }}</td>
          <td>{{ user.usuario }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.fechaNacimiento }}</td>
          <td>{{ user.rol }}</td>
          <td>
            <button class="btn btn-sm btn-warning me-2" (click)="abrirEditar(i)" data-bs-toggle="modal" data-bs-target="#modalEditar">Editar</button>
            <button class="btn btn-sm btn-danger" (click)="abrirEliminar(i)" data-bs-toggle="modal" data-bs-target="#modalEliminar">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</main>

<!-- Modal Editar -->
<div class="modal fade" id="modalEditar" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content" *ngIf="usuarioEditando">
      <div class="modal-header"><h5 class="modal-title">Editar Usuario</h5></div>
      <div class="modal-body">
        <input class="form-control mb-2" [(ngModel)]="usuarioEditando.nombre" placeholder="Nombre">
        <input class="form-control mb-2" [(ngModel)]="usuarioEditando.usuario" placeholder="Usuario">
        <input class="form-control mb-2" [(ngModel)]="usuarioEditando.fechaNacimiento" type="date">
        <select class="form-control mb-2" [(ngModel)]="usuarioEditando.rol">
          <option value="admin">Administrador</option>
          <option value="cliente">Cliente</option>
        </select>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-success" (click)="guardarEdicion()" data-bs-dismiss="modal">Guardar</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Eliminar -->
<div class="modal fade" id="modalEliminar" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"><h5 class="modal-title">Confirmar eliminación</h5></div>
      <div class="modal-body">¿Estás seguro de eliminar este usuario?</div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-danger" (click)="confirmarEliminar()" data-bs-dismiss="modal">Eliminar</button>
      </div>
    </div>
  </div>
</div>